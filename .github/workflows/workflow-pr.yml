name: PR pipeline
on:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    inputs:
      app_name:
        description: 'Application name'
        required: true
        default: 'image-rescale'
        type: string
  pull_request:
    branches:
      - "main"
    types: [synchronize, opened, reopened, ready_for_review]

# Ensures that only a single job or workflow using the same concurrency group (branch) will run at a time
concurrency:
  group: ${{ github.ref }}
  cancel-in-progress: true

permissions:
  checks: write
  pull-requests: write

jobs:
  tests:
    name: PR pipeline for image-rescale
    uses: ./.github/workflows/job-tests.yml
    with:
      app_name: ${{ inputs.app_name }}
    secrets: inherit
